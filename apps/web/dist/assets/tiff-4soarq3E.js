import{h as L}from"./index-CXl_6E9F.js";function l(r,o,c){r[o]=c&255,r[o+1]=c>>>8&255}function m(r,o,c){r[o]=c&255,r[o+1]=c>>>8&255,r[o+2]=c>>>16&255,r[o+3]=c>>>24&255}function P(r,o=256){const c=Math.min(o,Math.max(1,r.length)),b=new Uint16Array(o),S=new Uint16Array(o),T=new Uint16Array(o);for(let u=0;u<c;u++){const[e,w,E]=L(r[u]||"#000000");b[u]=e/255*65535|0,S[u]=w/255*65535|0,T[u]=E/255*65535|0}const s=new Uint16Array(o*3);return s.set(b,0),s.set(S,o),s.set(T,o*2),s}function I(r,o,c,b){if(c.length!==r*o)throw new Error("indices size mismatch");const S=8,T=P(b,256),s=new Uint8Array(T.buffer),e=8,w=c.length,E=e+w,A=s.length,t=E+A,p=11,O=2+p*12+4,i=t+O,n=new Uint8Array(i);n[0]=73,n[1]=73,l(n,2,42),m(n,4,t),n.set(c,e),n.set(s,E);const y=3,d=4;function f(g,z,h,F,U,M){const x=g+2+z*12;l(n,x-2,h),l(n,x,F),m(n,x+2,U),m(n,x+6,M)}l(n,t,p);let a=0;return f(t,a++,256,d,1,r),f(t,a++,257,d,1,o),f(t,a++,258,y,1,S),f(t,a++,259,y,1,1),f(t,a++,262,y,1,3),f(t,a++,273,d,1,e),f(t,a++,277,y,1,1),f(t,a++,278,d,1,o),f(t,a++,279,d,1,w),f(t,a++,284,y,1,1),f(t,a++,320,y,3*256,E),m(n,t+2+p*12,0),n}function R(r){return new Blob([r],{type:"image/tiff"})}function Y(r,o,c){if(c.length!==r*o*4)throw new Error("rgba size mismatch");const S=8,T=c.length,s=S+T,e=s+8,w=12,E=2+w*12+4,A=e+E,t=new Uint8Array(A);t[0]=73,t[1]=73,t[2]=42,t[3]=0,m(t,4,e),t.set(c,S),l(t,s+0,8),l(t,s+2,8),l(t,s+4,8),l(t,s+6,8);const p=3,O=4;function i(y,d,f,a,g,z){const h=y+2+d*12;l(t,h+0,f),l(t,h+2,a),m(t,h+4,g),m(t,h+8,z)}l(t,e,w);let n=0;return i(e,n++,256,O,1,r),i(e,n++,257,O,1,o),i(e,n++,258,p,4,s),i(e,n++,259,p,1,1),i(e,n++,262,p,1,2),i(e,n++,273,O,1,S),i(e,n++,277,p,1,4),i(e,n++,278,O,1,o),i(e,n++,279,O,1,T),i(e,n++,284,p,1,1),i(e,n++,338,p,1,2),m(t,e+2+w*12,0),t}export{R as blobFromTIFF,I as encodeTIFF8Indexed,Y as encodeTIFFRGBA32};
